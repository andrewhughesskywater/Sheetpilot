/**
 * Modern Material Design 3 Segmented Button Styles
 * Shape-morphing button group where selected button pops out
 */

.modern-segmented-container {
  display: flex;
  justify-content: center;
  flex: 1;
}

/* ToggleButtonGroup - forms one continuous pill when unselected */
.modern-segmented-group {
  display: inline-flex !important;
  padding: 0 !important;
  background: var(--md-sys-color-tertiary-container) !important;
  border-radius: var(--md-sys-shape-corner-full) !important;
  border: none !important;
  box-shadow: none !important;
  gap: 0 !important;
}

/* Individual buttons - part of connected group */
.modern-segmented-button {
  min-width: 64px !important;
  height: 40px !important;
  padding: 0 var(--sp-space-4) !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
  color: var(--md-sys-color-on-surface) !important;
  
  /* Typography */
  font-family: var(--md-sys-typescale-label-large-font) !important;
  font-size: var(--md-sys-typescale-label-large-size) !important;
  font-weight: var(--md-sys-typescale-label-large-weight) !important;
  letter-spacing: var(--md-sys-typescale-label-large-tracking) !important;
  text-transform: none !important;
  
  /* Unselected: square corners (part of continuous bar) */
  border-radius: 0 !important;
  
  /* Smooth morphing animation */
  transition: 
    border-radius var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized),
    background-color var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized),
    color var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard),
    transform var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized),
    padding var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized) !important;
  
  -webkit-user-select: none !important;
  user-select: none !important;
  -webkit-tap-highlight-color: transparent !important;
}

/* First button - rounded left corners only */
.modern-segmented-button[data-position="first"]:not(.Mui-selected) {
  border-radius: var(--md-sys-shape-corner-full) 0 0 var(--md-sys-shape-corner-full) !important;
}

/* Last button - rounded right corners only */
.modern-segmented-button[data-position="last"]:not(.Mui-selected) {
  border-radius: 0 var(--md-sys-shape-corner-full) var(--md-sys-shape-corner-full) 0 !important;
}

/* Middle buttons - square (no rounding) */
.modern-segmented-button[data-position="middle"]:not(.Mui-selected) {
  border-radius: 0 !important;
}

/* Selected button - morphs to fully rounded pill and pops out */
.modern-segmented-button.Mui-selected {
  background: var(--md-sys-color-primary) !important;
  color: var(--md-sys-color-on-primary) !important;
  border-radius: var(--md-sys-shape-corner-full) !important;
  transform: scale(1.08) !important;
  padding: 0 var(--sp-space-5) !important;
  z-index: 1 !important;
  box-shadow: var(--md-sys-elevation-level2) !important;
}

/* Hover state - unselected */
.modern-segmented-button:not(.Mui-selected):hover {
  background: color-mix(in srgb, var(--md-sys-color-on-surface) 8%, transparent) !important;
  color: var(--md-sys-color-on-surface) !important;
}

/* Hover state - selected */
.modern-segmented-button.Mui-selected:hover {
  background: color-mix(in srgb, var(--md-sys-color-primary) 92%, var(--md-sys-color-on-primary)) !important;
}

/* Focus state */
.modern-segmented-button:focus-visible {
  outline: 2px solid var(--md-sys-color-primary) !important;
  outline-offset: 2px !important;
  z-index: 2 !important;
}

/* Active/Press state - unselected */
.modern-segmented-button:not(.Mui-selected):active {
  background: color-mix(in srgb, var(--md-sys-color-on-surface) 12%, transparent) !important;
}

/* Active/Press state - selected */
.modern-segmented-button.Mui-selected:active {
  transform: scale(1.05) !important;
}

/* Remove default MUI dividers between buttons */
.modern-segmented-group .MuiToggleButtonGroup-grouped:not(:last-of-type) {
  border-right: none !important;
}

.modern-segmented-group .MuiToggleButtonGroup-grouped {
  margin: 0 !important;
}

/* Responsive design */
@media (max-width: 600px) {
  .modern-segmented-button {
    min-width: 48px !important;
    padding: 0 var(--sp-space-3) !important;
    font-size: var(--md-sys-typescale-label-medium-size) !important;
  }
  
  .modern-segmented-button.Mui-selected {
    padding: 0 var(--sp-space-4) !important;
  }
}

/* Accessibility - high contrast mode support */
@media (prefers-contrast: high) {
  .modern-segmented-group {
    border: 2px solid var(--md-sys-color-outline) !important;
  }
  
  .modern-segmented-button.Mui-selected {
    border: 2px solid var(--md-sys-color-on-primary) !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .modern-segmented-button {
    transition: 
      background-color var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard),
      color var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard) !important;
  }
  
  .modern-segmented-button,
  .modern-segmented-button.Mui-selected {
    transform: none !important;
  }
}
