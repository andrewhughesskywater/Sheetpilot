/*
  SheetPilot Theme — v2 (Material You–inspired)
  Adapted from theme_update.md for the SheetPilot application
*/

/*---------- Font imports ----------*/
@font-face {
  font-family: "Inter";
  src: url("/fonts/Inter/Inter-VariableFont_opsz,wght.ttf") format("truetype");
  font-weight: 100 900;
  font-display: swap;
  font-style: normal;
}

@font-face {
  font-family: "Inter";
  src: url("/fonts/Inter/Inter-Italic-VariableFont_opsz,wght.ttf") format("truetype");
  font-weight: 100 900;
  font-display: swap;
  font-style: italic;
}

@font-face {
  font-family: "Noto Sans";
  src: url("/fonts/Noto_Sans/NotoSans-VariableFont_wdth,wght.ttf") format("truetype");
  font-weight: 100 900;
  font-display: swap;
  font-style: normal;
}

@font-face {
  font-family: "Noto Sans";
  src: url("/fonts/Noto_Sans/NotoSans-Italic-VariableFont_wdth,wght.ttf") format("truetype");
  font-weight: 100 900;
  font-display: swap;
  font-style: italic;
}

/*---------- M3 Token Mapping (Backward Compatibility) ---------- */
:root {
  /* Brand - Map to M3 color system */
  --sp-color-primary: var(--md-sys-color-primary);
  --sp-color-secondary: var(--md-sys-color-secondary);

  /*Status - Map to M3 tokens */
  --sp-color-success: var(--md-ref-palette-tertiary60);
  --sp-color-warning: #FACC15;   /* Custom warning color */
  --sp-color-info:    var(--md-ref-palette-tertiary70);
  --sp-color-error:   var(--md-sys-color-error);

  /*Neutrals - Map to M3 surface tokens */
  --sp-bg:        var(--md-sys-color-background);
  --sp-surface:   var(--md-sys-color-surface);
  --sp-surface-2: var(--md-sys-color-surface-container-low);
  --sp-outline:   var(--md-sys-color-outline-variant);

  /*Text - Map to M3 text colors */
  --sp-text:      var(--md-sys-color-on-background);
  --sp-text-2:    var(--md-sys-color-on-surface-variant);
  --sp-on-primary: var(--md-sys-color-on-primary);
  
  /* Additional success/warning states for buttons */
  --sp-on-success: var(--md-ref-palette-tertiary100);
  --sp-on-warning: var(--md-ref-palette-neutral10);

  /*Typography — font families*/
  --sp-font-sans: "Inter", "Noto Sans", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --sp-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /*Typography — sizes & weights (rem for scalability) */
  --sp-fs-xxs: 0.75rem;   /* 12 */
  --sp-fs-xs:  0.8125rem; /* 13 */
  --sp-fs-sm:  0.875rem;  /* 14 */
  --sp-fs-md:  1rem;      /* 16 */
  --sp-fs-lg:  1.125rem;  /* 18 */
  --sp-fs-xl:  1.375rem;  /* 22 */
  --sp-fs-2xl: 1.75rem;   /* 28 */
  --sp-fs-3xl: 2.25rem;   /* 36*/

  --sp-fw-regular: 400;
  --sp-fw-medium:  500;
  --sp-fw-semibold:600;
  --sp-fw-bold:    700;

  --sp-lh-tight: 1.2;
  --sp-lh-normal:1.5;
  --sp-lh-relaxed:1.7;

  --sp-tracking-tight: -0.01em;
  --sp-tracking-wide:  0.01em;

  /*Spacing scale (4px base)*/
  --sp-space-0: 0;
  --sp-space-1: 4px;
  --sp-space-2: 8px;
  --sp-space-3: 12px;
  --sp-space-4: 16px;
  --sp-space-5: 20px;
  --sp-space-6: 24px;
  --sp-space-8: 32px;
  --sp-space-10:40px;
  --sp-space-12:48px;

  /*Elevation - Map to M3 elevation system*/
  --sp-shadow-0: var(--md-sys-elevation-level0);
  --sp-shadow-1: var(--md-sys-elevation-level1);
  --sp-shadow-2: var(--md-sys-elevation-level2);
  --sp-shadow-3: var(--md-sys-elevation-level3);
  --sp-shadow-4: var(--md-sys-elevation-level4);

  /*State overlays - Map to M3 state layers */
  --sp-hover: var(--md-sys-state-hover-opacity);
  --sp-pressed: var(--md-sys-state-pressed-opacity);
  --sp-disabled: 0.38; /* M3 disabled opacity */

  /*Motion - Map to M3 motion tokens */
  --sp-ease: var(--md-sys-motion-easing-standard);
  --sp-transition-fast: var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard);
  --sp-transition:      var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);
  --sp-transition-slow: var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-standard);

  /*Shape - Map to M3 corner radius */
  --sp-radius-sm: var(--md-sys-shape-corner-small);
  --sp-radius-md: var(--md-sys-shape-corner-medium);
  --sp-radius-lg: var(--md-sys-shape-corner-large);
  --sp-focus: 0 0 0 3px color-mix(in srgb, var(--md-sys-color-primary) 35%, transparent);

  /*Components*/
  --sp-btn-height: 40px;
  --sp-input-height: 40px;
  --sp-ring: 2px;

  /*Z layers*/
  --sp-z-appbar: 100;
  --sp-z-drawer: 400;
  --sp-z-dropdown: 700;
  --sp-z-modal: 1000;
  --sp-z-toast: 1100;
  --sp-z-tooltip: 1200;
}


/*---------- Base & reset ----------*/
:root{ color-scheme: light; }

html { font-size: 16px; }
body {
  margin: 0;
  background: var(--sp-bg);
  color: var(--sp-text);
  font-family: var(--sp-font-sans);
  line-height: var(--sp-lh-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/*---------- Typography helpers ----------*/
.h1 { font-size: var(--sp-fs-3xl); font-weight: var(--sp-fw-bold); letter-spacing: var(--sp-tracking-tight); line-height: var(--sp-lh-tight); }
.h2 { font-size: var(--sp-fs-2xl); font-weight: var(--sp-fw-semibold); letter-spacing: var(--sp-tracking-tight); line-height: var(--sp-lh-tight); }
.h3 { font-size: var(--sp-fs-xl);  font-weight: var(--sp-fw-semibold); line-height: var(--sp-lh-tight); }
.subtitle { font-size: var(--sp-fs-lg); color: var(--sp-text-2); }
.body   { font-size: var(--sp-fs-md); }
.body-sm{ font-size: var(--sp-fs-sm); }
.caption{ font-size: var(--sp-fs-xs); color: var(--sp-text-2); letter-spacing: var(--sp-tracking-wide); }
.mono{ font-family: var(--sp-font-mono); }

/*---------- Surfaces ----------*/
.sp-surface { background: var(--sp-surface); color: var(--sp-text); border: 1px solid var(--sp-outline); border-radius: var(--sp-radius-md); box-shadow: var(--sp-shadow-1); }

/*---------- Buttons ----------*/
.button {
  display: inline-flex; gap: var(--sp-space-2); align-items: center; justify-content: center;
  height: var(--sp-btn-height); padding: 0 var(--sp-space-4);
  border-radius: var(--sp-radius-md); border: 1px solid transparent;
  font-weight: var(--sp-fw-semibold); cursor: pointer;
  transition: transform var(--sp-transition), box-shadow var(--sp-transition), background var(--sp-transition), color var(--sp-transition);
}
.button:focus-visible { outline: none; box-shadow: var(--sp-focus); }
.button:active { transform: translateY(1px); }

.button--primary { background: var(--sp-color-primary); color: var(--sp-on-primary); box-shadow: var(--sp-shadow-2); }
.button--primary:hover { filter: brightness(1.05); }
.button--primary:disabled { opacity: var(--sp-disabled); cursor: not-allowed; }

.button--secondary { 
  background: color-mix(in srgb, var(--md-sys-color-primary) 12%, transparent);
  color: var(--md-sys-color-primary); 
  border-color: color-mix(in srgb, var(--md-sys-color-primary) 40%, transparent);
}
.button--secondary:hover { 
  background: color-mix(in srgb, var(--md-sys-color-primary) 18%, transparent);
}

.button--danger { background: var(--sp-color-error); color: var(--md-sys-color-on-error); }
.button--text { background: transparent; color: var(--sp-color-primary); border-color: transparent; }
.button--text:hover { background: color-mix(in srgb, var(--md-sys-color-primary) 8%, transparent); }

/*---------- Inputs ----------*/
.input, select.sp-select, textarea.input {
  height: var(--sp-input-height);
  padding: 0 var(--sp-space-3);
  border-radius: var(--sp-radius-md);
  border: 1px solid var(--sp-outline);
  background: var(--sp-surface);
  color: var(--sp-text);
  transition: border-color var(--sp-transition), box-shadow var(--sp-transition), background var(--sp-transition);
}
textarea.input { height: auto; padding: var(--sp-space-3); min-height: 96px; resize: vertical; }
.input::placeholder { color: var(--sp-text-2); }
.input:focus { outline: none; border-color: var(--sp-color-primary); box-shadow: var(--sp-focus); }
.input--invalid { border-color: var(--sp-color-error); }

/*---------- Cards ----------*/
.card { background: var(--sp-surface); border: 1px solid var(--sp-outline); border-radius: var(--sp-radius-lg); box-shadow: var(--sp-shadow-2); padding: var(--sp-space-4); }
.card--elevated { box-shadow: var(--sp-shadow-4); }

/*---------- Badges ----------*/
.badge { display:inline-flex; align-items:center; gap:var(--sp-space-2); border-radius: var(--md-sys-shape-corner-full); padding: var(--sp-space-1) var(--sp-space-3); font-weight:var(--sp-fw-semibold); border:1px solid transparent; }
.badge--info    { background: rgba(167, 139, 250, 0.18); color: var(--sp-text); border-color: rgba(167, 139, 250, 0.45); }
.badge--success { background: rgba(52, 211, 153, 0.18); border-color: rgba(52, 211, 153, 0.45); }
.badge--warn    { background: rgba(250, 204, 21, 0.22); border-color: rgba(250, 204, 21, 0.50); }

/*---------- Alerts ----------*/
.alert { display:flex; gap:var(--sp-space-3); align-items:flex-start; padding:var(--sp-space-3) var(--sp-space-4); border-radius: var(--sp-radius-md); border:1px solid var(--sp-outline); }
.alert--error   { background: rgba(220, 38, 38, 0.14); border-color: rgba(220, 38, 38, 0.4); }
.alert--success { background: rgba(52, 211, 153, 0.14); border-color: rgba(52, 211, 153, 0.4); }
.alert--info    { background: rgba(167, 139, 250, 0.14); border-color: rgba(167, 139, 250, 0.4); }

/*---------- Navigation (app bar) ----------*/
.appbar { position: sticky; top: 0; z-index: var(--sp-z-appbar); display:flex; align-items:center; gap: var(--sp-space-3); height:56px; padding:0 var(--sp-space-4); background: var(--sp-surface); border-bottom:1px solid var(--sp-outline); box-shadow: var(--sp-shadow-1); }
.appbar__title { font-weight: var(--sp-fw-bold); letter-spacing: var(--sp-tracking-tight); }

/*---------- FAB ----------*/
.fab { position: fixed; right: var(--sp-space-6); bottom: var(--sp-space-6); height: 56px; min-width: 56px; padding: 0 var(--sp-space-5); border-radius: var(--md-sys-shape-corner-full); background: var(--sp-color-primary); color: var(--sp-on-primary); border:none; box-shadow: var(--sp-shadow-4); display:flex; align-items:center; justify-content:center; gap: var(--sp-space-2); cursor: pointer; transition: transform var(--sp-transition), filter var(--sp-transition); }
.fab:hover { filter: brightness(1.06); }

/*---------- Table ----------*/
.table { width: 100%; border-collapse: separate; border-spacing: 0; }
.table th, .table td { padding: var(--sp-space-3) var(--sp-space-4); border-bottom: 1px solid var(--sp-outline); text-align: left; }
.table thead th { font-weight: var(--sp-fw-semibold); color: var(--sp-text-2); }
.table tr:hover td { background: color-mix(in srgb, var(--sp-color-primary) 6%, transparent); }

/*---------- Links & utilities ----------*/
.sp-link   { color: var(--sp-color-primary); text-decoration: none; }
.sp-link:hover { text-decoration: underline; }
.sp-divider { height:1px; background: var(--sp-outline); border:0; }
.sp-muted  { color: var(--sp-text-2); }

/*---------- Animations (optional) ----------*/
@keyframes sp-fade-in { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }
.fade-in { animation: sp-fade-in var(--sp-transition) both; }



/*---------- Accessibility ----------*/
@media (prefers-reduced-motion: reduce) { * { transition: none !important; animation: none !important; } }
